\subsection{Succinctness}

We now prove that our construction produces succinct proofs.

\begin{restatable}[Few levels]{theorem}{restateThmFewLevels}
    \label{thm.few-levels}
    The number of superblock levels which have at least $m$ blocks are at most
    $\log(|S|)$, where $S$ is the set of all blocks produced, with overwhelming
    probability in $m$.
\end{restatable}

\ifonecolumn
\import{./}{proofs/fewlevels.tex}
\fi

The above theorem establishes that the number of superchains is small. What
remains to be shown is that few blocks will be included at each superchain
level.

\begin{restatable}[Large upchain expansion]{theorem}{restateThmLargeExpansion}
    \label{thm.large-expansion}
    Let $\chain$ be an honestly generated chain and let
    $\chain' = \chain\upchain^{\mu - 1}[i:i + \ell]$ with $\ell \geq 4m$.
    Then:

    \begin{equation}
      |\chain'\upchain^\mu| \geq m
    \end{equation}

    with overwhelming probability in $m$.
\end{restatable}

\ifonecolumn
\import{./}{proofs/largeexpansion.tex}
\fi

\begin{restatable}[Small downchain support]{corollary}{restateThmSmallSupport}
    \label{crly.small-support}
    Assume an honestly generated chain $\chain$ and let $\chain' = \chain\upchain^\mu[i:i + m]$. Then:

    \begin{equation}
      |\chain'\downchain\upchain^{\mu - 1}| \leq 4m
    \end{equation}

    with overwhelming probability in $m$.
\end{restatable}

\ifonecolumn
\import{./}{proofs/smallsupport.tex}
\fi

This last theorem establishes the fact that the support of blocks needed under
the $m$-sized chain suffix to move from one level to the one below is small.
Based on this, we can establish our theorem on succinctness:

\begin{restatable}[Optimistic succinctness]{theorem}{restateThmSuccinctness}
    \label{thm.succinctness}
    Non-interactive proofs-of-proof-of-work produced by honest provers on
    honestly generated chains with random scheduling are succinct with the
    number of blocks bounded by $4m \log(|\chain|)$, with overwhelming
    probability in $m$.
\end{restatable}

\ifonecolumn
\import{./}{proofs/succinctness.tex}
\else
Full proofs of these facts are provided in Appendix~\ref{sec.proofs}.
\fi

\begin{remark}[Denial of Service Attacks]
Clearly, it is possible for an adversary to produce large proofs that congest
the network of a verifier with limited resources. These proofs can be incorrect,
but the verifier will still attempt to verify them. Denial-of-service attacks
that crash such a verifier are possible if the verifier only has logarithmic
resources. Therefore, to avoid such attacks, the verifier must act as follows:
Whenever a large proof is provided by a prover, the verifier terminates early
with output $\bot$ regardless of which proof is better, indicating that they are
unable to reach a conclusion.

It is important to note that a verifier knowing ahead of time that a proof will
be large cannot conclude that the prover providing it is malicious, as an attack
on superquality of the blockchain could be taking place, requiring an honest
prover to provide long proofs.
\end{remark}
